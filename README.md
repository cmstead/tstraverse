# TSTraverse #

TSTraverse is a Typescript AST traversal tool for making static analysis tools easier to build. As time goes along, helper tooling will be added to limit the need for interacting directly with the typescript library for common tasks.

Find me online:
- [@cm_stead](https://twitter.com/cm_stead)
- [ChrisStead.com](http://www.chrisstead.com)

## Example ##

### Basic AST traversal ###

```javascript
// Test to verify enter and leave occur as a matched set

const sourceTree = typescript.createSourceFile(
            'Sample.ts',
            sourceCode,
            typescript.ScriptTarget.ES2015,
            true,
            typescript.compilerOptions);

let nodeStack = [];
let isMatching = true;

// Enter function will be executed as each node is first interacted with
function enter(node) {
    nodeStack.push(node);
}

// Leave function will be executed after all children have been interacted with
function leave(node) {
    const topNode = nodeStack.pop();
    
    isMatching = isMatching && topNode === node;
}

// Source tree can start from any known TS node 
tstraverse.traverse(sourceTree, {
    enter: enter,
    leave: leave
});

assert.isTrue(isMatching);
```

### Parsing a source string ###

```javascript
// This is just loading a source code into memory as a string. Source could come from any
// source as long as it is a single, contiguous string
const sourceCode = fs.readFileSync('./tests/fixtures/Sample.ts', { encoding: 'utf8' });
const fileName = 'Sample.ts';

// sourceCode string is required, fileName is optional. The output will only be
// minimally different -- only the fileName property will vary
sourceFile = tstraverse.helpers.parse(sourceCode, fileName);
```

### Comparing syntax kinds ###

```javascript
// Select a node from the AST generated by the parse function
const firstMember = sourceFile.statements[0].members[0];
// Select the correct SyntaxKind string from an enum
const syntaxKind = typescript.SyntaxKind[firstMember.kind];

// This is the actual check between syntax kinds
const nodeKindMatches = tstraverse.helpers.matchesSyntaxKind(syntaxKind)(firstMember);

// This is from the original test
assert.isTrue(nodeKindMatches);
```

## Roadmap ##

- [x] Source string -> AST generator for quick parsing
- [x] Node "syntaxKind" comparison function
- [ ] Quick node line and character start and end coordinate function
- [ ] Other utilities as they bubble up

## Version History ##

### v0.1.0 ###

- First traversal functionality added

### v0.2.0 ###

Added new functionality:

- AST quick parsing
- SyntaxKind comparison function